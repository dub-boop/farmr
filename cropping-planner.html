<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cropping Planner</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components/cropping-planner.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="cropping-planner-page">
        <div class="cropping-planner-page__header">
            <h1 class="cropping-planner-page__title">Cropping Planner</h1>
            <div class="cropping-planner-page__actions">
                <button id="toggleViewBtn" class="cropping-planner-page__button cropping-planner-page__button--secondary">
                    <i class="fa-solid fa-calendar-days"></i> <span id="toggleViewText">Calendar View</span>
                </button>
                <button id="addPlanBtn" class="cropping-planner-page__button cropping-planner-page__button--primary">
                    <i class="fa-solid fa-plus-circle"></i> Add Crop Plan
                </button>
            </div>
        </div>

        <div class="cropping-planner-page__filters card">
            <div class="cropping-planner-page__filter-group">
                <label for="filterField">Field:</label>
                <select id="filterField" class="cropping-planner-page__select">
                    <option value="all">All</option>
                    </select>
            </div>
            <div class="cropping-planner-page__filter-group">
                <label for="filterCrop">Crop:</label>
                <select id="filterCrop" class="cropping-planner-page__select">
                    <option value="all">All</option>
                     </select>
            </div>
            <div class="cropping-planner-page__filter-group">
                <label for="filterSeason">Season:</label>
                <select id="filterSeason" class="cropping-planner-page__select">
                    <option value="all">All</option>
                     <option value="Dry">Dry</option>
                    <option value="Rainy">Rainy</option>
                </select>
            </div>
        </div>

        <div id="tableView" class="cropping-planner-page__view-container">
            <div class="overflow-x-auto">
                 <table class="cropping-planner-page__table">
                     <thead>
                         <tr class="cropping-planner-page__table-header">
                             <th>Field</th>
                             <th>Crop</th>
                             <th>Variety</th>
                             <th>Planting Date</th>
                             <th>Harvest Date</th>
                             <th>Duration</th>
                             <th>Water Needs</th>
                             <th>Fertilizer Plan</th>
                             <th>Status</th>
                             <th>Actions</th>
                         </tr>
                     </thead>
                     <tbody id="cropPlanTableBody">
                         </tbody>
                 </table>
            </div>
        </div>

        <div id="calendarView" class="cropping-planner-page__view-container" style="display: none;">
             <div id="cropPlanCalendar" class="cropping-planner-page__calendar-grid">
                  </div>
        </div>

        <div id="cropPlanModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <h3 id="modalTitle">Add Crop Plan</h3>
                <form id="cropPlanForm">
                     <div class="form-group">
                         <label for="modalField">Field:</label>
                         <input type="text" id="modalField" name="field" required>
                     </div>
                     <div class="form-group">
                         <label for="modalCrop">Crop:</label>
                         <input type="text" id="modalCrop" name="crop" required>
                     </div>
                      <div class="form-group">
                         <label for="modalVariety">Variety:</label>
                         <input type="text" id="modalVariety" name="variety">
                     </div>
                     <div class="form-group">
                         <label for="modalPlantingDate">Planting Date:</label>
                         <input type="date" id="modalPlantingDate" name="plantingDate" required>
                     </div>
                     <div class="form-group">
                         <label for="modalHarvestDate">Harvest Date:</label>
                         <input type="date" id="modalHarvestDate" name="harvestDate" required>
                     </div>
                      <div class="form-group">
                         <label for="modalDuration">Duration:</label>
                         <input type="text" id="modalDuration" name="duration" disabled> {/* Duration is calculated */}
                     </div>
                      <div class="form-group">
                         <label for="modalWaterNeeds">Water Needs:</label>
                         <select id="modalWaterNeeds" name="waterNeeds">
                             <option value="">Select...</option>
                             <option value="Low">Low</option>
                             <option value="Moderate">Moderate</option>
                             <option value="High">High</option>
                         </select>
                     </div>
                     <div class="form-group">
                         <label for="modalFertilizer">Fertilizer Plan (comma-separated dates YYYY-MM-DD):</label>
                         <input type="text" id="modalFertilizer" name="fertilizer" placeholder="e.g., 2025-04-01, 2025-05-15">
                     </div>
                     <div class="form-group">
                         <label for="modalSeason">Season:</label>
                         <select id="modalSeason" name="season" required>
                              <option value="">Select...</option>
                             <option value="Dry">Dry</option>
                             <option value="Rainy">Rainy</option>
                         </select>
                     </div>

                    <div id="modalErrorMessage" class="cropping-planner-page__error" style="display: none; margin-top: 10px;"></div>

                    <div class="modal-footer">
                         <button type="submit" id="savePlanBtn" class="cropping-planner-page__button cropping-planner-page__button--primary">Save Plan</button>
                         <button type="button" id="cancelPlanBtn" class="cropping-planner-page__button cropping-planner-page__button--secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

    </div>

    <script src="js/components/cropping-planner.js"></script>
</body>
</html>